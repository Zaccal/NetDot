{"ast":null,"code":"import { createRandomDate } from \"./../utils/utilsFn\";\nimport axios from \"axios\";\nexport class ApiService {\n  static async getUsers(_ref) {\n    let {\n      limit,\n      page\n    } = _ref;\n    const request = await axios.get(this.URL_USERS + '?limit=100', {\n      params: {\n        _limit: limit,\n        _page: page\n      }\n    });\n    console.log(request);\n    const fromAPIUsers = request.data.users.map(user => {\n      return {\n        id: user.id,\n        login: user.username\n      };\n    });\n    return fromAPIUsers;\n  }\n  static async getPosts(_ref2) {\n    let {\n      limit,\n      page\n    } = _ref2;\n    const usersDatas = await this.getUsers({\n      limit: limit,\n      page: page\n    });\n    const usersPosts = await axios.get(this.URL_POSTS, {\n      params: {\n        _limit: limit,\n        _page: page\n      }\n    });\n    console.log(usersPosts);\n    let resultPosts = [];\n    usersPosts.data.forEach((post, index) => {\n      resultPosts.push({\n        postId: post.id,\n        postTitle: post.title,\n        postBody: post.body,\n        createdDate: createRandomDate(),\n        authorLogin: usersDatas[index].login,\n        userId: usersDatas[index].id\n      });\n    });\n    return resultPosts !== undefined ? resultPosts : [];\n  }\n  static async getUserById(id) {\n    return (await axios.get(this.URL_USERS + `/${id}`)).data;\n  }\n  static async getPostById(id) {\n    return (await axios.get(this.URL_POSTS + `/${id}`)).data;\n  }\n  static async getTotalCountPosts() {\n    return (await axios.get(this.URL_POSTS)).data.length;\n  }\n  static async getTotalCountUsers() {\n    return (await axios.get(this.URL_USERS)).data.length;\n  }\n}\nApiService.URL_USERS = \"https://dummyjson.com/users\";\nApiService.URL_POSTS = \"https://jsonplaceholder.typicode.com/posts\";","map":{"version":3,"names":["createRandomDate","axios","ApiService","getUsers","limit","page","request","get","URL_USERS","params","_limit","_page","console","log","fromAPIUsers","data","users","map","user","id","login","username","getPosts","usersDatas","usersPosts","URL_POSTS","resultPosts","forEach","post","index","push","postId","postTitle","title","postBody","body","createdDate","authorLogin","userId","undefined","getUserById","getPostById","getTotalCountPosts","length","getTotalCountUsers"],"sources":["C:/Users/ksss9/OneDrive/Документы/MyWorks/net-dot/src/API/ApiService.ts"],"sourcesContent":["import { createRandomDate } from \"./../utils/utilsFn\";\r\nimport { FromApiPostType, PostType, FromApiUser, otherUser, } from \"./../types/Interfaces\";\r\nimport axios from \"axios\";\r\n\r\ninterface ParamsAPI {\r\n  limit: number;\r\n  page: number\r\n}\r\n\r\ninterface userFromAPI {\r\n  username: string,\r\n  email: string,\r\n  image: string, \r\n}\r\n\r\ninterface PostFromAPI {\r\n  id: number,\r\n  title: string,\r\n  body: string \r\n}\r\n\r\nexport class ApiService {\r\n  private static URL_USERS = \"https://dummyjson.com/users\";\r\n  private static URL_POSTS = \"https://jsonplaceholder.typicode.com/posts\";\r\n\r\n  static async getUsers({limit, page}: ParamsAPI): Promise<otherUser[]> {\r\n    const request = await axios.get(this.URL_USERS + '?limit=100', {\r\n      params: {\r\n        _limit: limit,\r\n        _page: page,\r\n      }\r\n    })\r\n\r\n    console.log(request);\r\n    const fromAPIUsers = request.data.users.map(\r\n      (user: FromApiUser): Pick<otherUser, 'id' | 'login'> => {\r\n        return {\r\n          id: user.id,\r\n          login: user.username,\r\n        };\r\n      }\r\n    );\r\n\r\n    return fromAPIUsers;\r\n  }\r\n\r\n  static async getPosts({limit, page}: ParamsAPI): Promise<PostType[]> {\r\n    const usersDatas = await this.getUsers({\r\n      limit: limit,\r\n      page: page\r\n    });\r\n    const usersPosts = await axios.get(this.URL_POSTS, {\r\n      params: {\r\n        _limit: limit,\r\n        _page: page,\r\n      }\r\n    })\r\n    console.log(usersPosts);\r\n    let resultPosts: PostType[] = []\r\n    usersPosts.data.forEach((post: FromApiPostType, index: number) => {      \r\n      resultPosts.push({\r\n        postId: post.id,\r\n        postTitle: post.title,\r\n        postBody: post.body,\r\n        createdDate: createRandomDate(),\r\n        authorLogin: usersDatas[index].login,\r\n        userId: usersDatas[index].id,\r\n      })\r\n    })\r\n\r\n    return resultPosts !== undefined ? resultPosts : [];\r\n  }\r\n\r\n  static async getUserById(id: number | string): Promise<userFromAPI> {\r\n    return (await axios.get(this.URL_USERS + `/${id}`)).data\r\n  }\r\n\r\n  static async getPostById(id: number | string): Promise<PostFromAPI> {\r\n    return (await axios.get(this.URL_POSTS + `/${id}`)).data\r\n  }\r\n\r\n  static async getTotalCountPosts(): Promise<number> {\r\n    return (await axios.get(this.URL_POSTS)).data.length\r\n  }\r\n\r\n  static async getTotalCountUsers(): Promise<number> {\r\n    return (await axios.get(this.URL_USERS)).data.length\r\n  }\r\n}\r\n"],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,oBAAoB;AAErD,OAAOC,KAAK,MAAM,OAAO;AAmBzB,OAAO,MAAMC,UAAU,CAAC;EAItB,aAAaC,QAAQ,OAAiD;IAAA,IAAhD;MAACC,KAAK;MAAEC;IAAe,CAAC;IAC5C,MAAMC,OAAO,GAAG,MAAML,KAAK,CAACM,GAAG,CAAC,IAAI,CAACC,SAAS,GAAG,YAAY,EAAE;MAC7DC,MAAM,EAAE;QACNC,MAAM,EAAEN,KAAK;QACbO,KAAK,EAAEN;MACT;IACF,CAAC,CAAC;IAEFO,OAAO,CAACC,GAAG,CAACP,OAAO,CAAC;IACpB,MAAMQ,YAAY,GAAGR,OAAO,CAACS,IAAI,CAACC,KAAK,CAACC,GAAG,CACxCC,IAAiB,IAAsC;MACtD,OAAO;QACLC,EAAE,EAAED,IAAI,CAACC,EAAE;QACXC,KAAK,EAAEF,IAAI,CAACG;MACd,CAAC;IACH,CAAC,CACF;IAED,OAAOP,YAAY;EACrB;EAEA,aAAaQ,QAAQ,QAAgD;IAAA,IAA/C;MAAClB,KAAK;MAAEC;IAAe,CAAC;IAC5C,MAAMkB,UAAU,GAAG,MAAM,IAAI,CAACpB,QAAQ,CAAC;MACrCC,KAAK,EAAEA,KAAK;MACZC,IAAI,EAAEA;IACR,CAAC,CAAC;IACF,MAAMmB,UAAU,GAAG,MAAMvB,KAAK,CAACM,GAAG,CAAC,IAAI,CAACkB,SAAS,EAAE;MACjDhB,MAAM,EAAE;QACNC,MAAM,EAAEN,KAAK;QACbO,KAAK,EAAEN;MACT;IACF,CAAC,CAAC;IACFO,OAAO,CAACC,GAAG,CAACW,UAAU,CAAC;IACvB,IAAIE,WAAuB,GAAG,EAAE;IAChCF,UAAU,CAACT,IAAI,CAACY,OAAO,CAAC,CAACC,IAAqB,EAAEC,KAAa,KAAK;MAChEH,WAAW,CAACI,IAAI,CAAC;QACfC,MAAM,EAAEH,IAAI,CAACT,EAAE;QACfa,SAAS,EAAEJ,IAAI,CAACK,KAAK;QACrBC,QAAQ,EAAEN,IAAI,CAACO,IAAI;QACnBC,WAAW,EAAEpC,gBAAgB,EAAE;QAC/BqC,WAAW,EAAEd,UAAU,CAACM,KAAK,CAAC,CAACT,KAAK;QACpCkB,MAAM,EAAEf,UAAU,CAACM,KAAK,CAAC,CAACV;MAC5B,CAAC,CAAC;IACJ,CAAC,CAAC;IAEF,OAAOO,WAAW,KAAKa,SAAS,GAAGb,WAAW,GAAG,EAAE;EACrD;EAEA,aAAac,WAAW,CAACrB,EAAmB,EAAwB;IAClE,OAAO,CAAC,MAAMlB,KAAK,CAACM,GAAG,CAAC,IAAI,CAACC,SAAS,GAAI,IAAGW,EAAG,EAAC,CAAC,EAAEJ,IAAI;EAC1D;EAEA,aAAa0B,WAAW,CAACtB,EAAmB,EAAwB;IAClE,OAAO,CAAC,MAAMlB,KAAK,CAACM,GAAG,CAAC,IAAI,CAACkB,SAAS,GAAI,IAAGN,EAAG,EAAC,CAAC,EAAEJ,IAAI;EAC1D;EAEA,aAAa2B,kBAAkB,GAAoB;IACjD,OAAO,CAAC,MAAMzC,KAAK,CAACM,GAAG,CAAC,IAAI,CAACkB,SAAS,CAAC,EAAEV,IAAI,CAAC4B,MAAM;EACtD;EAEA,aAAaC,kBAAkB,GAAoB;IACjD,OAAO,CAAC,MAAM3C,KAAK,CAACM,GAAG,CAAC,IAAI,CAACC,SAAS,CAAC,EAAEO,IAAI,CAAC4B,MAAM;EACtD;AACF;AAnEazC,UAAU,CACNM,SAAS,GAAG,6BAA6B;AAD7CN,UAAU,CAENuB,SAAS,GAAG,4CAA4C"},"metadata":{},"sourceType":"module","externalDependencies":[]}